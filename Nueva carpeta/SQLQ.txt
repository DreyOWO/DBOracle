CREATE TABLE Usuario (
    Id_usuario INT,
    Nombre VARCHAR2(50),
    Apellido_1 VARCHAR2(50),
    Apellido_2 VARCHAR2(50),
    Correo VARCHAR2(100),
    Telefono INT,
    Contrasena VARCHAR2(50),
    Contacto_emergencia VARCHAR2(100),
    CONSTRAINT usuario_pk PRIMARY KEY (Id_usuario) USING INDEX (CREATE INDEX usuario_id_usuario_idx ON Usuario (Id_usuario))
);
/

CREATE TABLE Roles (
    Id_rol INT,
    Id_usuario INT,
    Nombre VARCHAR2(50),
    CONSTRAINT roles_pk PRIMARY KEY (Id_rol) USING INDEX (CREATE INDEX roles_id_rol_idx ON Roles (Id_rol)),
    CONSTRAINT usuario_rol_fk FOREIGN KEY (Id_usuario) REFERENCES Usuario(Id_usuario)
);
/

CREATE TABLE Inventario (
    Id_producto INT,
    Nombre VARCHAR2(50),
    Descripcion VARCHAR2(255),
    Cantidad int,
    Precio DECIMAL(10, 2),
    CONSTRAINT inventario_pk PRIMARY KEY (Id_producto) USING INDEX (CREATE INDEX inventario_id_producto_idx ON Inventario (Id_producto))
);
/

CREATE TABLE Ventas (
    Id_venta INT,
    Id_cliente INT,
    Id_producto INT,
    Cantidad INT,
    Fecha DATE,
    CONSTRAINT ventas_pk PRIMARY KEY (Id_venta) USING INDEX (CREATE INDEX ventas_id_venta_idx ON Ventas (Id_venta)),
    CONSTRAINT cliente_venta_fk FOREIGN KEY (Id_cliente) REFERENCES Usuario(Id_usuario),
    CONSTRAINT producto_venta_fk FOREIGN KEY (Id_producto) REFERENCES Inventario(Id_producto)
);
/

CREATE TABLE Facturas (
    Id_factura INT,
    Id_usuario INT,
    Fecha DATE,
    Total Decimal(10, 2),
    CONSTRAINT facturas_pk PRIMARY KEY (Id_factura) USING INDEX (CREATE INDEX facturas_id_factura_idx ON Facturas (Id_factura)),
    CONSTRAINT usuario_factura_fk FOREIGN KEY (Id_usuario) REFERENCES Usuario(Id_usuario)
);
/

CREATE TABLE DetallesFactura (
    Id_detalle INT,
    Id_factura INT,
    Descripcion VARCHAR2(255),
    Cantidad INT,
    Precio_unitario DECIMAL(10, 2),
    Subtotal DECIMAL(10, 2),
    CONSTRAINT detalles_factura_pk PRIMARY KEY (Id_detalle) USING INDEX (CREATE INDEX detalles_factura_id_detalle_idx ON DetallesFactura (Id_detalle)),
    CONSTRAINT factura_detalle_fk FOREIGN KEY (Id_factura) REFERENCES Facturas(Id_factura)
);
/

CREATE TABLE FacturasVenta (
    Id_facturas_ventas INT,
    Id_factura INT,
    Id_venta INT,
    CONSTRAINT facturas_venta_pk PRIMARY KEY (Id_facturas_ventas) USING INDEX (CREATE INDEX facturas_venta_id_facturas_ventas_idx ON FacturasVenta (Id_facturas_ventas)),
    CONSTRAINT factura_venta_fk FOREIGN KEY (Id_factura) REFERENCES Facturas(Id_factura),
    CONSTRAINT venta_factura_fk FOREIGN KEY (Id_venta) REFERENCES Ventas(Id_venta)
);
/

CREATE TABLE Vehiculos (
    Placa INT,
    Id_cliente INT,
    Tipo VARCHAR2(50),
    Marca VARCHAR2(50),
    Modelo VARCHAR2(50),
    AÃ±o INT,
    CONSTRAINT vehiculos_pk PRIMARY KEY (Placa) USING INDEX (CREATE INDEX vehiculos_placa_idx ON Vehiculos (Placa)),
    CONSTRAINT cliente_vehiculo_fk FOREIGN KEY (Id_cliente) REFERENCES Usuario(Id_usuario)
);
/

CREATE TABLE Citas (
    Id_cita INT,
    Id_cliente INT,
    Placa INT,
    Fecha DATE,
    Motivo VARCHAR2(255),
    Estado VARCHAR2(50),
    Motivo_cancelacion VARCHAR2(255),
    CONSTRAINT citas_pk PRIMARY KEY (Id_cita) USING INDEX (CREATE INDEX citas_id_cita_idx ON Citas (Id_cita)),
    CONSTRAINT cliente_cita_fk FOREIGN KEY (Id_cliente) REFERENCES Usuario(Id_usuario),
    CONSTRAINT vehiculo_cita_fk FOREIGN KEY (Placa) REFERENCES Vehiculos(Placa)
);
/

CREATE TABLE ComentariosCita (
    Id_comentario INT,
    Id_cita INT,
    Comentario VARCHAR2(255),
    Fecha DATE,
    CONSTRAINT comentarios_cita_pk PRIMARY KEY (Id_comentario) USING INDEX (CREATE INDEX comentarios_cita_id_comentario_idx ON ComentariosCita (Id_comentario)),
    CONSTRAINT cita_comentario_fk FOREIGN KEY (Id_cita) REFERENCES Citas(Id_cita)
);
/

CREATE TABLE FacturasCita (
    Id_facturas_cita INT,
    Id_factura INT,
    Id_cita INT,
    CONSTRAINT facturas_cita_pk PRIMARY KEY (Id_facturas_cita) USING INDEX (CREATE INDEX facturas_cita_id_facturas_cita_idx ON FacturasCita (Id_facturas_cita)),
    CONSTRAINT factura_cita_fk FOREIGN KEY (Id_factura) REFERENCES Facturas(Id_factura),
    CONSTRAINT cita_factura_fk FOREIGN KEY (Id_cita) REFERENCES Citas(Id_cita)
);
